(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{G:()=>O});const t=[],n={};function o(e){return{add:function(e){t.push(e)},mainFolder:t,addFolder:i,removeFromMainFolder:function(e){const n=t.indexOf(e);t.splice(n,1)}}}function i(e){n.folder=e,console.log(n)}const d={week:[],today:[],pushToWeek(e){this.week.push(e)},pushToToday(e){this.today.push(e)},pushtoImportant(e){important.push(e)},getWeek(){return this.week},getToday(){return this.today},removeWeek(e){const t=this.week.indexOf(e);this.week.splice(t,1)},removeToday(e){const t=this.week.indexOf(e);this.today.splice(t,1)}};function r(e){document.querySelectorAll(".task-container").forEach((e=>e.remove())),e.forEach((e=>s(e)))}function s(e){const t=document.querySelector(".tasks-container"),n=document.createElement("div");n.classList.add("task-container");const o=document.createElement("p");n.appendChild(o),o.classList.add("task-name"),o.innerHTML=e.title;const i=document.createElement("div"),d=document.createElement("p");d.innerHTML=e.dueDate,d.classList.add("task-date"),n.appendChild(d),e.storeDomElement(n),i.classList.add("task-logos");const r=function(){const e=[];for(let t=1;t<=3;t++){const t=document.createElement("span"),n=document.createElement("img");t.appendChild(n),e.push(t)}return e[0].firstElementChild.src="img/edit.png",e[0].classList.add("edit"),e[2].firstElementChild.src="img/trash.png",e[2].classList.add("trash"),e[1].firstElementChild.src="img/info.svg  ",e[1].classList.add("info"),e}();e.storeIcons(r),r.forEach((e=>i.appendChild(e))),n.appendChild(i),t.appendChild(n)}function l(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e){l(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===a(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function u(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var m={};function p(){return m}function f(e,t){var n,o,i,d,r,s,a,m;l(1,arguments);var f=p(),h=u(null!==(n=null!==(o=null!==(i=null!==(d=null==t?void 0:t.weekStartsOn)&&void 0!==d?d:null==t||null===(r=t.locale)||void 0===r||null===(s=r.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:f.weekStartsOn)&&void 0!==o?o:null===(a=f.locale)||void 0===a||null===(m=a.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var y=c(e),v=y.getDay(),g=(v<h?7:0)+v-h;return y.setDate(y.getDate()-g),y.setHours(0,0,0,0),y}function h(e,t,n){l(2,arguments);var o=f(e,n),i=f(t,n);return o.getTime()===i.getTime()}function y(e){l(1,arguments);var t=c(e);return t.setHours(0,0,0,0),t}function v(e,t){l(2,arguments);var n=y(e),o=y(t);return n.getTime()===o.getTime()}let g="";function D(e,t,n){const i=new FormData(e),a=Object.fromEntries(i),{title:c}=a,{description:u}=a,{dueDate:m}=a,{priority:p}=a;if("editTask"===t){const e=n.parentFolder;console.log(e.toDofolder),n.editToDo(c,u,m,p),r(e.toDofolder)}else"addTask"===t?function(e,t,n,i,r){const a=new M(e,t,n,i);(function(e){const t=Date.parse(e.dueDate);let n="",o="";(function(e,t){return l(1,arguments),h(e,Date.now(),t)})(t)&&(n=!0),function(e){return l(1,arguments),v(e,Date.now())}(t)&&(o=!0),!0===n&&(d.pushToWeek(e),e.addDateFolder("week")),!0===o&&(d.pushToToday(e),e.addDateFolder("today"))})(a),o().add(a),""!==r?(r.addToFolder(a),r.switchMainDisplayFolder()):s(a)}(c,u,m,p,n):E(c)}function E(e){const t=new x(e);g=t,console.log(t),t.newFolderDom(),t.switchMainDisplayFolder(),O.push(t),localStorage.setItem("folders",JSON.stringify(O)),console.log(O)}const k=document.getElementById("Epopup"),C=document.getElementsByClassName("popup-main");function w(e,t){const n=event.target.id,o=document.getElementById("popup-header");return k.style.display="flex","warning"===e?(document.querySelector(".popup-title").classList.add("header-warning"),function(e){b("on");const t=document.createElement("p");t.innerHTML=`This will permanently delete the folder:<br><br>${e}<br><br>Click 'delete' to confirm.`,C[0].appendChild(t),C[0].classList.add("warning");const n=document.createElement("button");n.textContent="Delete",n.classList.add("delete-button"),C[0].appendChild(n);const o=e;n.addEventListener("click",(function(e){o.deleteToDo(),n.remove(),C[0].classList.remove("warning"),t.remove(),form.innerHTML=" ",k.style.display="none",b(),document.querySelector(".popup-title").classList.remove("header-warning"),e.preventDefault()}))}(t),void(o.textContent="Delete Folder")):"info"===e?(o.textContent="Info",function(e){document.getElementById("form").style.display="none";const t=document.createElement("div");t.classList.add("info-container"),C[0].appendChild(t),t.appendChild(L("Title",e.title)),t.appendChild(L("Description",e.description)),t.appendChild(L("Due Date",e.dueDate)),t.appendChild(L("Priority",e.priority)),t.appendChild(L("Folder",e.parentFolder.folder))}(t),void T("info")):("edit"===e&&(o.textContent="Edit",F(["Title","Description","Due Date","Priority"],0,t),T("editTask",t)),"createFolder"==n&&(o.textContent="Create Folder",F(["Title"]),C[0].classList.add("createFolder"),T("createFolder")),void("add-task"==n&&(o.textContent="Add task",F(["Title","Description","Due Date","Priority"]),T("addTask"))))}function F(e,t,n){const o=document.getElementById("form"),i=n;function d(e,t,n){const i=document.createElement("div");i.classList.add("input-wrapper"),o.appendChild(i);const d=document.createElement("label");d.textContent=e,d.htmlFor=n,i.appendChild(d),i.appendChild(t)}console.log(i),e.map((e=>{if("Title"===e){const t=document.createElement("input");void 0!==i&&(t.value=n.title);const o="title";t.name=o,d(e,t,o)}if("Description"===e){const r=document.createElement("textarea");void 0!==i&&(r.value=n.description),r.name="description",d(e,r)}if("Due Date"===e){const s=document.createElement("input");void 0!==i&&(s.value=n.dueDate),s.name="dueDate",s.type="date",d(e,s)}if("Priority"===e){const l=document.createElement("select");function a(e){const t=document.createElement("option");t.textContent=e,l.appendChild(t)}l.name="priority",a("Low"),a("High"),void 0!==i&&(l.value=n.priority),d(e,l)}}))}function T(e,t){const n=document.createElement("button");n.textContent="Submit",n.classList.add("submit-button"),n.type="submit",n.addEventListener("click",(o=>{o.preventDefault(),"addTask"===e?D(n.form,"addTask",g):"editTask"===e?D(n.form,"editTask",t):(D(n.form,"createFolder"),C[0].classList.remove("createFolder")),d.innerHTML=" ",k.style.display="none"}));const o=document.createElement("button");o.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".info-container");console.log(t);const n=document.getElementById("form");if(void 0!==t&&"none"===n.style.display){const e=document.querySelector(".info-container"),t=document.getElementById("form");console.log(t),e.innerHTML=" ",e.remove(),t.style.display=""}n.innerHTML=" ",k.style.display="none"})),o.textContent="Cancel";const i=document.createElement("div");if(i.appendChild(n),i.appendChild(o),i.classList.add("buttons-container"),"info"===e)return document.querySelector(".info-container").appendChild(i),void n.remove();const d=document.getElementById("form");d.appendChild(i)}function L(e,t){const n=document.createElement("div");n.classList.add("info-item");const o=document.createElement("p"),i=document.createElement("p");if(o.textContent=e,i.textContent=t,"Description"===e){i.classList.add("desc");const e=document.createElement("div");return e.classList.add("desc-container"),e.appendChild(i),n.appendChild(o),n.appendChild(e),n}return n.appendChild(o),n.appendChild(i),n}function b(e){document.getElementById("form").style.display="on"===e?"none":""}function S(e){document.querySelector(".main-title").textContent=e}class x{toDofolder=[];constructor(e){this.folder=e}setHeader(){document.querySelector(".main-title").textContent=this.folder}newFolderDom(e){this.setHeader(),this.switchMainDisplayFolder(this.toDofolder);const t=document.querySelector(".folders-container");let n=document.createElement("a");n.classList.add("menu-link-item"),n.textContent=this.folder,t.appendChild(n);let o=new Image(20,20);o.src="img/trash.png",n.appendChild(o),o.addEventListener("click",(function(){i.deleteFolder()}));const i=this;n.addEventListener("click",(function(){i.switchMainDisplayFolder()})),this.folderDom=n}addToFolder(e){this.toDofolder.push(e),console.log(this.toDofolder),e.addParentFolder(this)}deleteFromFolder(e){let t=this.toDofolder.indexOf(e);this.toDofolder.splice(t,1)}switchMainDisplayFolder(){g=this,console.log(this.toDofolder),r(this.toDofolder),this.setHeader()}deleteFolder(){w("warning",this)}deleteToDo(){this.toDofolder.forEach((e=>{o().removeFromMainFolder(e),!0===e.inWeekFolder&&d.removeWeek(e),!0===e.inTodayFolder&&d.removeToday(e)})),this.deleteDOM()}deleteDOM(){this.folderDom.remove(),this.switchAway()}switchAway(){r(t),S("All")}}class M{constructor(e,t,n,o){this.title=e,this.description=t,this.dueDate=n,this.priority=o}storeIcons(e){const t=this;Array.from(e).forEach((e=>e.addEventListener("click",(e=>{const n=event.currentTarget;n.classList.contains("trash")?(t.delete(),t.delete2()):n.classList.contains("edit")?w("edit",t):w("info",t)}))))}storeDomElement(e){this.taskContainer=e}delete(){this.taskContainer.remove()}delete2(){console.log(this.parentFolder),this.parentFolder.deleteFromFolder(this),!0===this.inWeekFolder&&d.removeWeek(this),!0===this.inTodayFolder&&d.removeToday(this),o().removeFromMainFolder(this)}addParentFolder(e){this.parentFolder=e,console.log(this.parentFolder)}editToDo(e,t,n,o){this.title=e,this.description=t,this.dueDate=n,this.priority=o}addDateFolder(e){"week"===e&&(this.inWeekFolder=!0),"today"===e&&(this.inTodayFolder=!0)}}document.getElementById("add-task").addEventListener("click",w),document.getElementById("createFolder").addEventListener("click",w);const O=JSON.parse(localStorage.getItem("folders"))||[];document.querySelectorAll(".menu-link-item").forEach((e=>e.addEventListener("click",(e=>{const n=event.target;e.preventDefault(),"Week"===n.textContent?(S("Week"),r(d.getWeek())):"All"===n.textContent?(S("All"),r(t)):"Today"===n.textContent&&(S("Today"),r(d.getToday()))})))),E("Default")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxjQUNqQjFHLEtBQUswRyxhQUFha0YsaUJBQWlCNUwsT0FDVCxJQUF0QkEsS0FBSzhMLGNBQ1BuTSxFQUFlVyxXQUFXTixPQUVELElBQXZCQSxLQUFLK0wsZUFDUHBNLEVBQWVZLFlBQVlQLE1BRTdCbEIsSUFBa0JLLHFCQUFxQmEsS0FDekMsQ0FFQTJMLGdCQUFnQi9LLEdBQ2RaLEtBQUswRyxhQUFlOUYsRUFDcEJuQixRQUFRQyxJQUFJTSxLQUFLMEcsYUFDbkIsQ0FFQUUsU0FBU3JGLEVBQU9pRixFQUFhOUUsRUFBUytFLEdBQ3BDekcsS0FBS3VCLE1BQVFBLEVBQ2J2QixLQUFLd0csWUFBY0EsRUFDbkJ4RyxLQUFLMEIsUUFBVUEsRUFDZjFCLEtBQUt5RyxTQUFXQSxDQUNsQixDQUVBVSxjQUFjM0gsR0FDRyxTQUFYQSxJQUNGUSxLQUFLOEwsY0FBZSxHQUVQLFVBQVh0TSxJQUNGUSxLQUFLK0wsZUFBZ0IsRUFFekIsRUM5RG9CdEwsU0FBU3VILGVBQWUsWUFDaENjLGlCQUFpQixRQUFTWCxHQUViMUgsU0FBU3VILGVBQWUsZ0JBQ2hDYyxpQkFBaUIsUUFBU1gsR0FFdEMsTUFBTVQsRUFBY0csS0FBS2QsTUFBTVksYUFBYTZFLFFBQVEsYUFBZSxHSFRuRC9MLFNBQVNDLGlCQUFpQixtQkFFbENDLFNBQVNvSSxHQUFNQSxFQUFFRCxpQkFBaUIsU0FBVUMsSUFDdkQsTUFBTTBELEVBQUlyRSxNQUFNQyxPQUNoQlUsRUFBRUUsaUJBQ29CLFNBQWxCd0QsRUFBRTVELGFBQ0pxQyxFQUFVLFFBRVYxSyxFQURlYixFQUFlUyxZQUVILFFBQWxCcU0sRUFBRTVELGFBQ1hxQyxFQUFVLE9BRVYxSyxFQUFxQjVCLElBQ00sVUFBbEI2TixFQUFFNUQsY0FDWHFDLEVBQVUsU0FFVjFLLEVBRGViLEVBQWVVLFlBRWhDLE1HSkptSCxFQUFVLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3AtdG9kb2xpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9zcmMvZm9sZGVycy5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9zcmMvZGlzcGxheUZvbGRlcnMuanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3RvRGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvcC10b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9kZWZhdWx0T3B0aW9ucy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvcC10b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0Ly4vc3JjL2dldEZvcm1EYXRhLmpzIiwid2VicGFjazovL3RvcC10b2RvbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUaGlzV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVG9kYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0Ly4vc3JjL3BvcHVwLmpzIiwid2VicGFjazovL3RvcC10b2RvbGlzdC8uL3NyYy9zaWRlYmFyLWxpbmtzLmpzIiwid2VicGFjazovL3RvcC10b2RvbGlzdC8uL3NyYy9jcmVhdGVOZXdGb2xkZXIuanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0Ly4vc3JjL2FkZFRvRG8uanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbmltcG9ydCB7IGRpc3BsYXlGb2xkZXJzIH0gZnJvbSAnLi9kaXNwbGF5Rm9sZGVycyc7XG5cbmV4cG9ydCBjb25zdCBtYWluRm9sZGVyID0gW107XG5jb25zdCBleHRyYUZvbGRlcnMgPSB7XG5cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRUb01haW5Gb2xkZXIob2spIHtcbiAgZnVuY3Rpb24gYWRkKG9rKSB7XG4gICAgbWFpbkZvbGRlci5wdXNoKG9rKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrTWFpbkZvbGRlcigpIHtcbiAgICBjb25zb2xlLmxvZyhtYWluRm9sZGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUZyb21NYWluRm9sZGVyKGl0ZW0pIHtcbiAgICBjb25zdCBpbmRleCA9IG1haW5Gb2xkZXIuaW5kZXhPZihpdGVtKTtcbiAgICBtYWluRm9sZGVyLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFkZCwgbWFpbkZvbGRlciwgYWRkRm9sZGVyLCByZW1vdmVGcm9tTWFpbkZvbGRlcixcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEZvbGRlcihmb2xkZXIpIHtcbiAgZXh0cmFGb2xkZXJzLmZvbGRlciA9IGZvbGRlcjtcbiAgY29uc29sZS5sb2coZXh0cmFGb2xkZXJzKTtcbn1cblxuZXhwb3J0IGNvbnN0IHNpZGVCYXJGb2xkZXJzID0ge1xuXG4gIHdlZWs6IFtdLFxuICB0b2RheTogW10sXG5cbiAgcHVzaFRvV2Vlayh0b0RvKSB7XG4gICAgdGhpcy53ZWVrLnB1c2godG9Ebyk7XG4gIH0sXG5cbiAgcHVzaFRvVG9kYXkodG9Ebykge1xuICAgIHRoaXMudG9kYXkucHVzaCh0b0RvKTtcbiAgfSxcblxuICBwdXNodG9JbXBvcnRhbnQodG9Ebykge1xuICAgIGltcG9ydGFudC5wdXNoKHRvRG8pO1xuICB9LFxuXG4gIGdldFdlZWsoKSB7XG4gICAgcmV0dXJuIHRoaXMud2VlaztcbiAgfSxcblxuICBnZXRUb2RheSgpIHtcbiAgICByZXR1cm4gdGhpcy50b2RheTtcbiAgfSxcblxuICByZW1vdmVXZWVrKGl0ZW0pIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMud2Vlay5pbmRleE9mKGl0ZW0pO1xuICAgIHRoaXMud2Vlay5zcGxpY2UoaW5kZXgsIDEpO1xuICB9LFxuXG4gIHJlbW92ZVRvZGF5KGl0ZW0pIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMud2Vlay5pbmRleE9mKGl0ZW0pO1xuICAgIHRoaXMudG9kYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgfSxcbn07XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IHsgbWFpbkZvbGRlciB9IGZyb20gJy4vZm9sZGVycyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5Rm9sZGVycyhvaykge1xuICBjcmVhdGVOZWVkZWRFbGVtZW50cyhvayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5U3dpdGNoRm9sZGVycyhmb2xkZXIpIHtcbiAgY29uc3QgY3VycmVudFRhc2tDb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhc2stY29udGFpbmVyJyk7XG4gIGN1cnJlbnRUYXNrQ29udGFpbmVycy5mb3JFYWNoKChlKSA9PiBlLnJlbW92ZSgpKTtcbiAgZm9sZGVyLmZvckVhY2goKGUpID0+IGNyZWF0ZU5lZWRlZEVsZW1lbnRzKGUpKTtcbn1cblxuLyogZnVuY3Rpb24gY3JlYXRlRE9NVGFzaygpIHtcbiAgICBjcmVhdGVOZWVkZWRFbGVtZW50cygpXG59ICovXG5cbmZ1bmN0aW9uIGNyZWF0ZU5lZWRlZEVsZW1lbnRzKGUpIHtcbiAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3MtY29udGFpbmVyJyk7XG4gIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGFza0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0YXNrLWNvbnRhaW5lcicpO1xuICBjb25zdCB0YXNrTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrTmFtZSk7XG4gIHRhc2tOYW1lLmNsYXNzTGlzdC5hZGQoJ3Rhc2stbmFtZScpO1xuICB0YXNrTmFtZS5pbm5lckhUTUwgPSBlLnRpdGxlO1xuICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgZGF0ZS5pbm5lckhUTUwgPSBlLmR1ZURhdGU7XG4gIGRhdGUuY2xhc3NMaXN0LmFkZCgndGFzay1kYXRlJyk7XG4gIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgZS5zdG9yZURvbUVsZW1lbnQodGFza0NvbnRhaW5lcik7XG5cbiAgZGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2stbG9nb3MnKTtcblxuICBjb25zdCBzcGFuID0gY3JlYXRlSWNvbnMoKTtcbiAgZS5zdG9yZUljb25zKHNwYW4pO1xuICBzcGFuLmZvckVhY2goKGUpID0+IGRpdi5hcHBlbmRDaGlsZChlKSk7XG4gIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgdGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0NvbnRhaW5lcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUljb25zKCkge1xuICBjb25zdCBhcnJheU9mU3BhbnMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzsgaSsrKSB7XG4gICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBzcGFuLmFwcGVuZENoaWxkKGltZyk7XG4gICAgYXJyYXlPZlNwYW5zLnB1c2goc3Bhbik7XG4gIH1cblxuICBhcnJheU9mU3BhbnNbMF0uZmlyc3RFbGVtZW50Q2hpbGQuc3JjID0gJ2ltZy9lZGl0LnBuZyc7XG4gIGFycmF5T2ZTcGFuc1swXS5jbGFzc0xpc3QuYWRkKCdlZGl0Jyk7XG4gIGFycmF5T2ZTcGFuc1syXS5maXJzdEVsZW1lbnRDaGlsZC5zcmMgPSAnaW1nL3RyYXNoLnBuZyc7XG4gIGFycmF5T2ZTcGFuc1syXS5jbGFzc0xpc3QuYWRkKCd0cmFzaCcpO1xuICBhcnJheU9mU3BhbnNbMV0uZmlyc3RFbGVtZW50Q2hpbGQuc3JjID0gJ2ltZy9pbmZvLnN2ZyAgJztcbiAgYXJyYXlPZlNwYW5zWzFdLmNsYXNzTGlzdC5hZGQoJ2luZm8nKTtcbiAgcmV0dXJuIGFycmF5T2ZTcGFucztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCBfdHlwZW9mKGFyZ3VtZW50KSA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI3N0cmluZy1hcmd1bWVudHNcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0ludGVnZXIoZGlydHlOdW1iZXIpIHtcbiAgaWYgKGRpcnR5TnVtYmVyID09PSBudWxsIHx8IGRpcnR5TnVtYmVyID09PSB0cnVlIHx8IGRpcnR5TnVtYmVyID09PSBmYWxzZSkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICB2YXIgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTtcblxuICBpZiAoaXNOYU4obnVtYmVyKSkge1xuICAgIHJldHVybiBudW1iZXI7XG4gIH1cblxuICByZXR1cm4gbnVtYmVyIDwgMCA/IE1hdGguY2VpbChudW1iZXIpIDogTWF0aC5mbG9vcihudW1iZXIpO1xufSIsInZhciBkZWZhdWx0T3B0aW9ucyA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4gZGVmYXVsdE9wdGlvbnM7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdE9wdGlvbnMobmV3T3B0aW9ucykge1xuICBkZWZhdWx0T3B0aW9ucyA9IG5ld09wdGlvbnM7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRPcHRpb25zIH0gZnJvbSBcIi4uL19saWIvZGVmYXVsdE9wdGlvbnMvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFN1biBBdWcgMzEgMjAxNCAwMDowMDowMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0aGUgd2VlayBzdGFydHMgb24gTW9uZGF5LCB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBNb24gU2VwIDAxIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mV2VlayhkaXJ0eURhdGUsIG9wdGlvbnMpIHtcbiAgdmFyIF9yZWYsIF9yZWYyLCBfcmVmMywgX29wdGlvbnMkd2Vla1N0YXJ0c09uLCBfb3B0aW9ucyRsb2NhbGUsIF9vcHRpb25zJGxvY2FsZSRvcHRpbywgX2RlZmF1bHRPcHRpb25zJGxvY2FsLCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyO1xuXG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSBnZXREZWZhdWx0T3B0aW9ucygpO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gdG9JbnRlZ2VyKChfcmVmID0gKF9yZWYyID0gKF9yZWYzID0gKF9vcHRpb25zJHdlZWtTdGFydHNPbiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9vcHRpb25zJHdlZWtTdGFydHNPbiAhPT0gdm9pZCAwID8gX29wdGlvbnMkd2Vla1N0YXJ0c09uIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX29wdGlvbnMkbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUpID09PSBudWxsIHx8IF9vcHRpb25zJGxvY2FsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9vcHRpb25zJGxvY2FsZSRvcHRpbyA9IF9vcHRpb25zJGxvY2FsZS5vcHRpb25zKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRsb2NhbGUkb3B0aW8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGxvY2FsZSRvcHRpby53ZWVrU3RhcnRzT24pICE9PSBudWxsICYmIF9yZWYzICE9PSB2b2lkIDAgPyBfcmVmMyA6IGRlZmF1bHRPcHRpb25zLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZjIgIT09IHZvaWQgMCA/IF9yZWYyIDogKF9kZWZhdWx0T3B0aW9ucyRsb2NhbCA9IGRlZmF1bHRPcHRpb25zLmxvY2FsZSkgPT09IG51bGwgfHwgX2RlZmF1bHRPcHRpb25zJGxvY2FsID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RlZmF1bHRPcHRpb25zJGxvY2FsMiA9IF9kZWZhdWx0T3B0aW9ucyRsb2NhbC5vcHRpb25zKSA9PT0gbnVsbCB8fCBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGVmYXVsdE9wdGlvbnMkbG9jYWwyLndlZWtTdGFydHNPbikgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwID8gX3JlZiA6IDApOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICB2YXIgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247XG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZldlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKT9cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgd2VlayAoYW5kIG1vbnRoIGFuZCB5ZWFyKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgMzEgQXVndXN0IDIwMTQgYW5kIDQgU2VwdGVtYmVyIDIwMTQgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheSxcbiAqIC8vIGFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMVxuICogfSlcbiAqIC8vPT4gZmFsc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDEgSmFudWFyeSAyMDE0IGFuZCAxIEphbnVhcnkgMjAxNSBpbiB0aGUgc2FtZSB3ZWVrP1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCAwLCAxKSwgbmV3IERhdGUoMjAxNSwgMCwgMSkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZXZWVrID0gc3RhcnRPZldlZWsoZGlydHlEYXRlTGVmdCwgb3B0aW9ucyk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZVJpZ2h0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZldlZWsuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mV2Vlay5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIGRheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZkRheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mRGF5IGZyb20gXCIuLi9zdGFydE9mRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgMDY6MDA6MDAgYW5kIDQgU2VwdGVtYmVyIDE4OjAwOjAwIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNCwgOSwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciwgMjAxNCBhbmQgNCBTZXB0ZW1iZXIsIDIwMTUgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59IiwiLyogZXNsaW50LWRpc2FibGUgKi9cbmltcG9ydCBpc1RoaXNXZWVrIGZyb20gJ2RhdGUtZm5zL2lzVGhpc1dlZWsnO1xuaW1wb3J0IHsgaXNUb2RheSB9IGZyb20gJ2RhdGUtZm5zJztcbmltcG9ydCB7IG5ld1RvRG8gfSBmcm9tICcuL2FkZFRvRG8nO1xuaW1wb3J0IHsgYWRkVG9NYWluRm9sZGVyLCBhZGRGb2xkZXIsIHNpZGVCYXJGb2xkZXJzIH0gZnJvbSAnLi9mb2xkZXJzJztcbmltcG9ydCB7IGRpc3BsYXlGb2xkZXJzLCBkaXNwbGF5U3dpdGNoRm9sZGVycyB9IGZyb20gJy4vZGlzcGxheUZvbGRlcnMnO1xuaW1wb3J0IHsgY3JlYXRlRm9sZGVyLCBmb2xkZXIgfSBmcm9tICcuL2NyZWF0ZU5ld0ZvbGRlcic7XG5pbXBvcnQgeyBzdG9yZUZvbGRlciB9IGZyb20gJy4vaW5kZXgnO1xuXG5leHBvcnQgbGV0IGN1cnJlbnRmb2xkZXIgPSAnJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZvcm1EYXRhKGZvcm0sIGJ1dHRvblR5cGUsIGN1cnJlbnRGb2xkZXIpIHtcbiAgY29uc3QgayA9IGZvcm07XG4gIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGspO1xuICBjb25zdCBvYmplY3QgPSBPYmplY3QuZnJvbUVudHJpZXMoZm9ybURhdGEpO1xuXG4gIGNvbnN0IHsgdGl0bGUgfSA9IG9iamVjdDtcbiAgY29uc3QgeyBkZXNjcmlwdGlvbiB9ID0gb2JqZWN0O1xuICBjb25zdCB7IGR1ZURhdGUgfSA9IG9iamVjdDtcbiAgY29uc3QgeyBwcmlvcml0eSB9ID0gb2JqZWN0O1xuICBpZiAoYnV0dG9uVHlwZSA9PT0gJ2VkaXRUYXNrJykge1xuICAgIGNvbnN0IGZvbGRlciA9IGN1cnJlbnRGb2xkZXIucGFyZW50Rm9sZGVyO1xuICAgIGNvbnNvbGUubG9nKGZvbGRlci50b0RvZm9sZGVyKTtcbiAgICBjdXJyZW50Rm9sZGVyLmVkaXRUb0RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpO1xuICAgIGRpc3BsYXlTd2l0Y2hGb2xkZXJzKGZvbGRlci50b0RvZm9sZGVyKTtcbiAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSAnYWRkVGFzaycpIHtcbiAgICBhc3NpZ25Gb3JtRGF0YSh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBjdXJyZW50Rm9sZGVyKTtcbiAgfSBlbHNlIHtcbiAgICBuZXdGb2xkZXIodGl0bGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2lnbkZvcm1EYXRhKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGN1cnJlbnRGb2xkZXIpIHtcbiAgY29uc3QgdG9EbyA9IG5ldyBuZXdUb0RvKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpO1xuICBkZXRlcm1pbmVEYXRlKHRvRG8pO1xuICBhZGRUb01haW5Gb2xkZXIoKS5hZGQodG9Ebyk7XG4gIGlmIChjdXJyZW50Rm9sZGVyICE9PSAnJykge1xuICAgIGN1cnJlbnRGb2xkZXIuYWRkVG9Gb2xkZXIodG9Ebyk7XG4gICAgY3VycmVudEZvbGRlci5zd2l0Y2hNYWluRGlzcGxheUZvbGRlcigpO1xuICB9IGVsc2Uge1xuICAgIGRpc3BsYXlGb2xkZXJzKHRvRG8pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdGb2xkZXIodGl0bGUpIHtcbiAgY29uc3QgbmV3Rm9sZGVyID0gbmV3IGZvbGRlcih0aXRsZSk7XG4gIGN1cnJlbnRmb2xkZXIgPSBuZXdGb2xkZXI7XG4gIGNvbnNvbGUubG9nKG5ld0ZvbGRlcik7XG4gIG5ld0ZvbGRlci5uZXdGb2xkZXJEb20oKTtcbiAgbmV3Rm9sZGVyLnN3aXRjaE1haW5EaXNwbGF5Rm9sZGVyKCk7XG4gIHN0b3JlRm9sZGVyLnB1c2gobmV3Rm9sZGVyKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJmb2xkZXJzXCIsIEpTT04uc3RyaW5naWZ5KHN0b3JlRm9sZGVyKSk7XG4gIGNvbnNvbGUubG9nKHN0b3JlRm9sZGVyKTtcblxufVxuXG5mdW5jdGlvbiBkZXRlcm1pbmVEYXRlKHRvRG8pIHtcbiAgY29uc3QgcGFyc2VkRGF0ZSA9IERhdGUucGFyc2UodG9Eby5kdWVEYXRlKTtcbiAgbGV0IHdlZWsgPSAnJztcbiAgbGV0IHRvZGF5ID0gJyc7XG5cbiAgaWYgKGlzVGhpc1dlZWsocGFyc2VkRGF0ZSkpIHtcbiAgICB3ZWVrID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChpc1RvZGF5KHBhcnNlZERhdGUpKSB7XG4gICAgdG9kYXkgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHdlZWsgPT09IHRydWUpIHtcbiAgICBzaWRlQmFyRm9sZGVycy5wdXNoVG9XZWVrKHRvRG8pO1xuICAgIHRvRG8uYWRkRGF0ZUZvbGRlcignd2VlaycpO1xuICB9IGlmICh0b2RheSA9PT0gdHJ1ZSkge1xuICAgIHNpZGVCYXJGb2xkZXJzLnB1c2hUb1RvZGF5KHRvRG8pO1xuICAgIHRvRG8uYWRkRGF0ZUZvbGRlcigndG9kYXknKTtcbiAgfVxufVxuXG4iLCJpbXBvcnQgaXNTYW1lV2VlayBmcm9tIFwiLi4vaXNTYW1lV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1RoaXNXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9uc1xuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIGluIHRoaXMgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDI1IFNlcHRlbWJlciAyMDE0LCBpcyAyMSBTZXB0ZW1iZXIgMjAxNCBpbiB0aGlzIHdlZWs/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCBhbmQgd2VlayBzdGFydHMgd2l0aCBNb25kYXlcbiAqIC8vIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVGhpc1dlZWsobmV3IERhdGUoMjAxNCwgOCwgMjEpLCB7IHdlZWtTdGFydHNPbjogMSB9KVxuICogLy89PiBmYWxzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RoaXNXZWVrKGRpcnR5RGF0ZSwgb3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIGlzU2FtZVdlZWsoZGlydHlEYXRlLCBEYXRlLm5vdygpLCBvcHRpb25zKTtcbn0iLCJpbXBvcnQgaXNTYW1lRGF5IGZyb20gXCIuLi9pc1NhbWVEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlIGlzIHRvZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgNiBPY3RvYmVyIDIwMTQsIGlzIDYgT2N0b2JlciAxNDowMDowMCB0b2RheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzVG9kYXkobmV3IERhdGUoMjAxNCwgOSwgNiwgMTQsIDApKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUb2RheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVEYXkoZGlydHlEYXRlLCBEYXRlLm5vdygpKTtcbn0iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IHsgZm9sZGVyIH0gZnJvbSAnLi9jcmVhdGVOZXdGb2xkZXInO1xuaW1wb3J0IHsgZ2V0Rm9ybURhdGEsIGN1cnJlbnRmb2xkZXIgfSBmcm9tICcuL2dldEZvcm1EYXRhJztcblxuY29uc3QgcG9wdXBIID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0Vwb3B1cCcpO1xuY29uc3QgcG9wdXBNYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncG9wdXAtbWFpbicpO1xuZXhwb3J0IGZ1bmN0aW9uIHBvcFVwKGUsIHRvRG8pIHtcbiAgY29uc3QgcG9wVXAgPSBldmVudC50YXJnZXQuaWQ7XG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cC1oZWFkZXInKTtcbiAgcG9wdXBILnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cbiAgaWYgKGUgPT09ICd3YXJuaW5nJykge1xuICAgIGNvbnN0IGhlYWRlclRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC10aXRsZScpO1xuICAgIGhlYWRlclRvcC5jbGFzc0xpc3QuYWRkKCdoZWFkZXItd2FybmluZycpO1xuICAgIGNyZWF0ZVdhcm5pbmdCb3godG9Ebyk7XG4gICAgaGVhZGVyLnRleHRDb250ZW50ID0gJ0RlbGV0ZSBGb2xkZXInO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChlID09PSAnaW5mbycpIHtcbiAgICBoZWFkZXIudGV4dENvbnRlbnQgPSAnSW5mbyc7XG4gICAgY3JlYXRlSW5mb0JveENvbnRlbnRzKHRvRG8pO1xuICAgIGNyZWF0ZUJ1dHRvbnMoJ2luZm8nKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZSA9PT0gJ2VkaXQnKSB7XG4gICAgaGVhZGVyLnRleHRDb250ZW50ID0gJ0VkaXQnO1xuICAgIGNyZWF0ZUJveElucHV0KFsnVGl0bGUnLCAnRGVzY3JpcHRpb24nLCAnRHVlIERhdGUnLCAnUHJpb3JpdHknXSwgJ2VkaXQnLCB0b0RvKTtcbiAgICBjcmVhdGVCdXR0b25zKCdlZGl0VGFzaycsIHRvRG8pO1xuICB9XG5cbiAgaWYgKHBvcFVwID09ICdjcmVhdGVGb2xkZXInKSB7XG4gICAgaGVhZGVyLnRleHRDb250ZW50ID0gJ0NyZWF0ZSBGb2xkZXInO1xuICAgIGNyZWF0ZUJveElucHV0KFsnVGl0bGUnXSk7XG4gICAgcG9wdXBNYWluWzBdLmNsYXNzTGlzdC5hZGQoJ2NyZWF0ZUZvbGRlcicpO1xuICAgIGNyZWF0ZUJ1dHRvbnMoJ2NyZWF0ZUZvbGRlcicpO1xuICB9XG5cbiAgaWYgKHBvcFVwID09ICdhZGQtdGFzaycpIHtcbiAgICBoZWFkZXIudGV4dENvbnRlbnQgPSAnQWRkIHRhc2snO1xuICAgIGNyZWF0ZUJveElucHV0KFsnVGl0bGUnLCAnRGVzY3JpcHRpb24nLCAnRHVlIERhdGUnLCAnUHJpb3JpdHknXSk7XG4gICAgY3JlYXRlQnV0dG9ucygnYWRkVGFzaycpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJveElucHV0KGFyciwgZWRpdCwgdGFzaykge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0nKTtcbiAgY29uc3QgYSA9IHRhc2s7XG4gIGNvbnNvbGUubG9nKGEpO1xuICBhcnIubWFwKChlKSA9PiB7XG4gICAgaWYgKGUgPT09ICdUaXRsZScpIHtcbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgIGlmIChhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaW5wdXQudmFsdWUgPSB0YXNrLnRpdGxlO1xuICAgICAgfVxuICAgICAgY29uc3QgbmFtZSA9ICd0aXRsZSc7XG4gICAgICBpbnB1dC5uYW1lID0gbmFtZTtcbiAgICAgIHNldElucHV0TGFiZWwoZSwgaW5wdXQsIG5hbWUpO1xuICAgIH1cbiAgICBpZiAoZSA9PT0gJ0Rlc2NyaXB0aW9uJykge1xuICAgICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgaWYgKGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHRhc2suZGVzY3JpcHRpb247XG4gICAgICB9XG4gICAgICB0ZXh0QXJlYS5uYW1lID0gJ2Rlc2NyaXB0aW9uJztcbiAgICAgIHNldElucHV0TGFiZWwoZSwgdGV4dEFyZWEpO1xuICAgIH1cbiAgICBpZiAoZSA9PT0gJ0R1ZSBEYXRlJykge1xuICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgaWYgKGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpbnB1dC52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcbiAgICAgIH1cbiAgICAgIGlucHV0Lm5hbWUgPSAnZHVlRGF0ZSc7XG4gICAgICBpbnB1dC50eXBlID0gJ2RhdGUnO1xuICAgICAgc2V0SW5wdXRMYWJlbChlLCBpbnB1dCk7XG4gICAgfVxuICAgIGlmIChlID09PSAnUHJpb3JpdHknKSB7XG4gICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbiAgICAgIHNlbGVjdC5uYW1lID0gJ3ByaW9yaXR5JztcbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbih0ZXh0Q29udGVudCkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XG4gICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgfVxuICAgICAgY3JlYXRlT3B0aW9uKCdMb3cnKTtcbiAgICAgIGNyZWF0ZU9wdGlvbignSGlnaCcpO1xuICAgICAgaWYgKGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZWxlY3QudmFsdWUgPSB0YXNrLnByaW9yaXR5O1xuICAgICAgfVxuXG4gICAgICBzZXRJbnB1dExhYmVsKGUsIHNlbGVjdCk7XG4gICAgfVxuICB9KTtcbiAgLyogICBjb25zdCBpbnB1dExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXG4gICAgaW5wdXRXcmFwcGVyLmFwcGVuZENoaWxkKGlucHV0TGFiZWwpXG4gICAgaW5wdXRXcmFwcGVyLmFwcGVuZENoaWxkKGlucHV0KTsgKi9cblxuICBmdW5jdGlvbiBzZXRJbnB1dExhYmVsKGUsIGVsZW1lbnRUb0NyZWF0ZSwgbmFtZSkge1xuICAgIGNvbnN0IGlucHV0V3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGlucHV0V3JhcHBlci5jbGFzc0xpc3QuYWRkKCdpbnB1dC13cmFwcGVyJyk7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dFdyYXBwZXIpO1xuICAgIGNvbnN0IGlucHV0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgIGlucHV0TGFiZWwudGV4dENvbnRlbnQgPSBlO1xuICAgIGlucHV0TGFiZWwuaHRtbEZvciA9IG5hbWU7XG4gICAgaW5wdXRXcmFwcGVyLmFwcGVuZENoaWxkKGlucHV0TGFiZWwpO1xuICAgIGlucHV0V3JhcHBlci5hcHBlbmRDaGlsZChlbGVtZW50VG9DcmVhdGUpO1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVCdXR0b25zKGJ1dHRvblR5cGUsIHRhc2spIHtcblxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ1N1Ym1pdCc7XG4gIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzdWJtaXQtYnV0dG9uJyk7XG4gIHN1Ym1pdEJ1dHRvbi50eXBlID0gJ3N1Ym1pdCc7XG5cbiAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKGJ1dHRvblR5cGUgPT09ICdhZGRUYXNrJykge1xuICAgICAgZ2V0Rm9ybURhdGEoc3VibWl0QnV0dG9uLmZvcm0sICdhZGRUYXNrJywgY3VycmVudGZvbGRlcik7XG4gICAgfSBlbHNlIGlmIChidXR0b25UeXBlID09PSAnZWRpdFRhc2snKSB7XG4gICAgICBnZXRGb3JtRGF0YShzdWJtaXRCdXR0b24uZm9ybSwgJ2VkaXRUYXNrJywgdGFzayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdldEZvcm1EYXRhKHN1Ym1pdEJ1dHRvbi5mb3JtLCAnY3JlYXRlRm9sZGVyJyk7XG4gICAgICBwb3B1cE1haW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgnY3JlYXRlRm9sZGVyJyk7XG4gICAgfVxuICAgIGZvcm0uaW5uZXJIVE1MID0gJyAnO1xuICAgIHBvcHVwSC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9KTtcblxuICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgaW5mb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmZvLWNvbnRhaW5lcicpO1xuICAgIGNvbnNvbGUubG9nKGluZm9Db250YWluZXIpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybScpO1xuICAgIGlmIChpbmZvQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiYgZm9ybS5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgIGNvbnN0IGluZm9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5mby1jb250YWluZXInKTtcbiAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybScpO1xuICAgICAgY29uc29sZS5sb2coZm9ybSk7XG4gICAgICBpbmZvQ29udGFpbmVyLmlubmVySFRNTCA9ICcgJztcbiAgICAgIGluZm9Db250YWluZXIucmVtb3ZlKCk7XG4gICAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB9XG4gICAgZm9ybS5pbm5lckhUTUwgPSAnICc7XG4gICAgcG9wdXBILnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH0pO1xuICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSAnQ2FuY2VsJztcbiAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbik7XG4gIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKTtcbiAgYnV0dG9uc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdidXR0b25zLWNvbnRhaW5lcicpO1xuICBpZiAoYnV0dG9uVHlwZSA9PT0gJ2luZm8nKSB7XG4gICAgY29uc3QgaW5mb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmZvLWNvbnRhaW5lcicpO1xuICAgIGluZm9Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uc0NvbnRhaW5lcik7XG4gICAgc3VibWl0QnV0dG9uLnJlbW92ZSgpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0nKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChidXR0b25zQ29udGFpbmVyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5mb0JveENvbnRlbnRzKHRvRG8pIHtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtJyk7XG4gIGZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdpbmZvLWNvbnRhaW5lcicpO1xuICBwb3B1cE1haW5bMF0uYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5mb0NvbnRhaW5lcignVGl0bGUnLCB0b0RvLnRpdGxlKSk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbmZvQ29udGFpbmVyKCdEZXNjcmlwdGlvbicsIHRvRG8uZGVzY3JpcHRpb24pKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGluZm9Db250YWluZXIoJ0R1ZSBEYXRlJywgdG9Eby5kdWVEYXRlKSk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbmZvQ29udGFpbmVyKCdQcmlvcml0eScsIHRvRG8ucHJpb3JpdHkpKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGluZm9Db250YWluZXIoJ0ZvbGRlcicsIHRvRG8ucGFyZW50Rm9sZGVyLmZvbGRlcikpO1xufVxuXG5mdW5jdGlvbiBpbmZvQ29udGFpbmVyKGxlZnQsIHJpZ2h0KSB7XG4gIGNvbnN0IGluZm9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgaW5mb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdpbmZvLWl0ZW0nKTtcbiAgY29uc3QgaW5mb0xlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGNvbnN0IGluZm9SaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblxuICBpbmZvTGVmdC50ZXh0Q29udGVudCA9IGxlZnQ7XG4gIGluZm9SaWdodC50ZXh0Q29udGVudCA9IHJpZ2h0O1xuICBpZiAobGVmdCA9PT0gJ0Rlc2NyaXB0aW9uJykge1xuICAgIGluZm9SaWdodC5jbGFzc0xpc3QuYWRkKCdkZXNjJyk7XG4gICAgY29uc3QgZGVzY0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRlc2NDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGVzYy1jb250YWluZXInKTtcbiAgICBkZXNjQ29udGFpbmVyLmFwcGVuZENoaWxkKGluZm9SaWdodCk7XG4gICAgaW5mb0NvbnRhaW5lci5hcHBlbmRDaGlsZChpbmZvTGVmdCk7XG4gICAgaW5mb0NvbnRhaW5lci5hcHBlbmRDaGlsZChkZXNjQ29udGFpbmVyKTtcbiAgICByZXR1cm4gaW5mb0NvbnRhaW5lcjtcbiAgfSBpbmZvQ29udGFpbmVyLmFwcGVuZENoaWxkKGluZm9MZWZ0KTtcbiAgaW5mb0NvbnRhaW5lci5hcHBlbmRDaGlsZChpbmZvUmlnaHQpO1xuICByZXR1cm4gaW5mb0NvbnRhaW5lcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlV2FybmluZ0JveChlKSB7XG5cblxuICB0b2dnbGVGb3JtRGlzcGxheShcIm9uXCIpO1xuICBjb25zdCB3YXJuaW5nVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgd2FybmluZ1RleHQuaW5uZXJIVE1MID0gJ1RoaXMgd2lsbCBwZXJtYW5lbnRseSBkZWxldGUgdGhlIGZvbGRlcjonICsgXCI8YnI+XCIgKyBcIjxicj5cIiArIGAke2V9YCArICc8YnI+JyBcbiAgKyBcIjxicj5cIiArIFwiQ2xpY2sgJ2RlbGV0ZScgdG8gY29uZmlybS5cIjtcbiAgcG9wdXBNYWluWzBdLmFwcGVuZENoaWxkKHdhcm5pbmdUZXh0KTtcbiAgcG9wdXBNYWluWzBdLmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKTtcblxuICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBidXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICBidXR0b24uY2xhc3NMaXN0LmFkZChcImRlbGV0ZS1idXR0b25cIik7XG4gIHBvcHVwTWFpblswXS5hcHBlbmRDaGlsZChidXR0b24pO1xuICBjb25zdCBmb2xkZXIgPSBlXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihhKSB7XG4gICAgZm9sZGVyLmRlbGV0ZVRvRG8oKVxuICAgIGJ1dHRvbi5yZW1vdmUoKTtcbiAgICBwb3B1cE1haW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgnd2FybmluZycpXG4gICAgd2FybmluZ1RleHQucmVtb3ZlKCk7XG4gICAgZm9ybS5pbm5lckhUTUwgPSAnICc7XG4gICAgcG9wdXBILnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdG9nZ2xlRm9ybURpc3BsYXkoKTtcbiAgICBjb25zdCBoZWFkZXJUb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtdGl0bGUnKTtcbiAgICBoZWFkZXJUb3AuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyLXdhcm5pbmcnKTtcbiAgICBhLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuXG5cbiAgfSApXG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUZvcm1EaXNwbGF5KGEpIHtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtJyk7XG4gIGlmKGEgPT09IFwib25cIikge1xuICBmb3JtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH0gZWxzZSB7XG4gICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gIH1cbn1cbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG5pbXBvcnQgeyBtYWluRm9sZGVyLCBzaWRlQmFyRm9sZGVycyB9IGZyb20gJy4vZm9sZGVycyc7XG5pbXBvcnQgeyBkaXNwbGF5U3dpdGNoRm9sZGVycyB9IGZyb20gJy4vZGlzcGxheUZvbGRlcnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gb2soKSB7XG4gIGNvbnN0IHNpZGVCYXJMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWxpbmstaXRlbScpO1xuXG4gIHNpZGVCYXJMaW5rcy5mb3JFYWNoKChhKSA9PiBhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGEpID0+IHtcbiAgICBjb25zdCBiID0gZXZlbnQudGFyZ2V0O1xuICAgIGEucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoYi50ZXh0Q29udGVudCA9PT0gJ1dlZWsnKSB7XG4gICAgICBzZXRIZWFkZXIoJ1dlZWsnKTtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHNpZGVCYXJGb2xkZXJzLmdldFdlZWsoKTtcbiAgICAgIGRpc3BsYXlTd2l0Y2hGb2xkZXJzKGZvbGRlcik7XG4gICAgfSBlbHNlIGlmIChiLnRleHRDb250ZW50ID09PSAnQWxsJykge1xuICAgICAgc2V0SGVhZGVyKCdBbGwnKTtcbiAgICAgIGNvbnN0IGZvbGRlciA9IG1haW5Gb2xkZXI7XG4gICAgICBkaXNwbGF5U3dpdGNoRm9sZGVycyhtYWluRm9sZGVyKTtcbiAgICB9IGVsc2UgaWYgKGIudGV4dENvbnRlbnQgPT09ICdUb2RheScpIHtcbiAgICAgIHNldEhlYWRlcignVG9kYXknKTtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHNpZGVCYXJGb2xkZXJzLmdldFRvZGF5KCk7XG4gICAgICBkaXNwbGF5U3dpdGNoRm9sZGVycyhmb2xkZXIpO1xuICAgIH1cbiAgfSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SGVhZGVyKG5ld0hlYWRlcikge1xuICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi10aXRsZScpO1xuICBoZWFkZXIudGV4dENvbnRlbnQgPSBuZXdIZWFkZXI7XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyogZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcihmb2xkZXIpIHtcbiAgICBjb25zdCBuZXdGb2xkZXIgPSBbIF1cbiAgICBuZXdGb2xkZXJEb20oZm9sZGVyKTtcbiAgICBcbiAgICByZXR1cm4gbmV3Rm9sZGVyXG4gICAgXG59XG5cbmZ1bmN0aW9uIG5ld0ZvbGRlckRvbShmb2xkZXIpIHtcbiAgICBjb25zdCBhcHBlbmRIZXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb2xkZXJzLWNvbnRhaW5lclwiKVxuICAgIGxldCBmb2xkZXJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKVxuICAgIGZvbGRlckJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWVudS1saW5rLWl0ZW1cIilcbiAgICBmb2xkZXJCdXR0b24udGV4dENvbnRlbnQgPSBmb2xkZXJcbiAgICBhcHBlbmRIZXJlLmFwcGVuZENoaWxkKGZvbGRlckJ1dHRvbilcbn0gKi9cbi8qIGVzbGludC1kaXNhYmxlICovXG5cbmltcG9ydCB7IGRpc3BsYXlTd2l0Y2hGb2xkZXJzIH0gZnJvbSBcIi4vZGlzcGxheUZvbGRlcnNcIlxuaW1wb3J0IHsgYWRkVG9NYWluRm9sZGVyLCBtYWluRm9sZGVyLCBzaWRlQmFyRm9sZGVycyB9IGZyb20gXCIuL2ZvbGRlcnNcIlxuaW1wb3J0IHsgY3VycmVudGZvbGRlciwgZ2V0Rm9ybURhdGEgfSBmcm9tIFwiLi9nZXRGb3JtRGF0YVwiXG5pbXBvcnQgeyBwb3BVcCB9IGZyb20gXCIuL3BvcHVwXCJcbmltcG9ydCB7IHNldEhlYWRlciB9IGZyb20gXCIuL3NpZGViYXItbGlua3NcIlxuXG5cbmV4cG9ydCBjbGFzcyBmb2xkZXIge1xuICAgIHRvRG9mb2xkZXIgPSBbXG5cbiAgICBdXG5cbiAgICBjb25zdHJ1Y3Rvcihmb2xkZXIpIHtcbiAgICAgICAgdGhpcy5mb2xkZXIgPSBmb2xkZXJcbiAgICB9XG4gICAgXG4gICAgc2V0SGVhZGVyKCkge1xuICAgICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tdGl0bGVcIilcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gdGhpcy5mb2xkZXI7XG4gICAgfVxuXG4gICAgbmV3Rm9sZGVyRG9tKGZvbGRlcikge1xuICAgICAgICB0aGlzLnNldEhlYWRlcigpO1xuICAgICAgICB0aGlzLnN3aXRjaE1haW5EaXNwbGF5Rm9sZGVyKHRoaXMudG9Eb2ZvbGRlcik7XG4gICAgICAgIGNvbnN0IGFwcGVuZEhlcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvbGRlcnMtY29udGFpbmVyXCIpXG4gICAgICAgIGxldCBmb2xkZXJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKVxuICAgICAgICBmb2xkZXJCdXR0b24uY2xhc3NMaXN0LmFkZChcIm1lbnUtbGluay1pdGVtXCIpXG4gICAgICAgIGZvbGRlckJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuZm9sZGVyO1xuICAgICAgICBhcHBlbmRIZXJlLmFwcGVuZENoaWxkKGZvbGRlckJ1dHRvbilcbiAgICAgICAgbGV0IGljb24gPSBuZXcgSW1hZ2UoMjAsIDIwKVxuICAgICAgICBpY29uLnNyYyA9IFwiaW1nL3RyYXNoLnBuZ1wiXG4gICAgICAgIGZvbGRlckJ1dHRvbi5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LmRlbGV0ZUZvbGRlcigpO1xuICAgICAgICB9KVxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpc1xuICAgICAgICBmb2xkZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhhdC5zd2l0Y2hNYWluRGlzcGxheUZvbGRlcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mb2xkZXJEb20gPSBmb2xkZXJCdXR0b247XG4gICAgfVxuXG4gICAgYWRkVG9Gb2xkZXIodG9Ebykge1xuICAgICAgICB0aGlzLnRvRG9mb2xkZXIucHVzaCh0b0RvKVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRvRG9mb2xkZXIpO1xuICAgICAgICB0b0RvLmFkZFBhcmVudEZvbGRlcih0aGlzKTtcbiAgICB9XG5cbiAgICBkZWxldGVGcm9tRm9sZGVyKGl0ZW1Ub0RlbGV0ZSkge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLnRvRG9mb2xkZXIuaW5kZXhPZihpdGVtVG9EZWxldGUpXG4gICAgICAgIHRoaXMudG9Eb2ZvbGRlci5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHN3aXRjaE1haW5EaXNwbGF5Rm9sZGVyKCkge1xuICAgICAgICBjdXJyZW50Zm9sZGVyID0gdGhpcztcbiAgICAgICAgY29uc29sZS5sb2codGhpcy50b0RvZm9sZGVyKTtcbiAgICAgICAgZGlzcGxheVN3aXRjaEZvbGRlcnModGhpcy50b0RvZm9sZGVyKTtcbiAgICAgICAgdGhpcy5zZXRIZWFkZXIoKTtcbiAgICB9XG5cbiAgICBkZWxldGVGb2xkZXIoKSB7XG4gICAgICAgIHBvcFVwKFwid2FybmluZ1wiLCB0aGlzKTtcbiAgICB9XG5cbiAgICBkZWxldGVUb0RvKCkgeyAvLyBEZWxldGVzIGFueSB0b0RvIHRhc2tzIGluc2lkZSB0aGlzIGZvbGRlciBmcm9tIFwiQWxsXCIgYW5kIFwiVG9kYXlcIiAvIFwiV2Vla1wiIGZvbGRlcnNcbiAgICAgICAgbGV0IGZvbGRlciA9IHRoaXMudG9Eb2ZvbGRlcjtcbiAgICAgICAgZm9sZGVyLmZvckVhY2goZSA9PiBcbiAgICAgICAge1xuICAgICAgICAgICAgYWRkVG9NYWluRm9sZGVyKCkucmVtb3ZlRnJvbU1haW5Gb2xkZXIoZSlcbiAgICAgICAgICAgIGlmIChlLmluV2Vla0ZvbGRlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHNpZGVCYXJGb2xkZXJzLnJlbW92ZVdlZWsoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5pblRvZGF5Rm9sZGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgc2lkZUJhckZvbGRlcnMucmVtb3ZlVG9kYXkoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlbGV0ZURPTSgpO1xuICAgIH1cblxuICAgIGRlbGV0ZURPTSgpIHtcbiAgICAgICAgdGhpcy5mb2xkZXJEb20ucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuc3dpdGNoQXdheSgpO1xuICAgIH1cblxuICAgIHN3aXRjaEF3YXkoKSB7XG4gICAgICAgIGRpc3BsYXlTd2l0Y2hGb2xkZXJzKG1haW5Gb2xkZXIpO1xuICAgICAgICBzZXRIZWFkZXIoXCJBbGxcIik7XG4gICAgfVxuXG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IHsgZm9sZGVyIH0gZnJvbSAnLi9jcmVhdGVOZXdGb2xkZXInO1xuXG5pbXBvcnQgeyBwb3BVcCB9IGZyb20gJy4vcG9wdXAnO1xuXG5pbXBvcnQgeyBhZGRUb01haW5Gb2xkZXIsIHNpZGVCYXJGb2xkZXJzIH0gZnJvbSAnLi9mb2xkZXJzJztcblxuZXhwb3J0IGNsYXNzIG5ld1RvRG8ge1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgfVxuXG4gIHN0b3JlSWNvbnMoc3Bhbikge1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgIGNvbnN0IGFycmF5T2ZJY29ucyA9IEFycmF5LmZyb20oc3Bhbik7XG4gICAgYXJyYXlPZkljb25zLmZvckVhY2goKGljb24pID0+IGljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgY29uc3QgaWNvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgICBpZiAoaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3RyYXNoJykpIHtcbiAgICAgICAgdGhhdC5kZWxldGUoKTtcbiAgICAgICAgdGhhdC5kZWxldGUyKCk7XG4gICAgICB9IGVsc2UgaWYgKGljb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0JykpIHtcbiAgICAgICAgcG9wVXAoJ2VkaXQnLCB0aGF0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBvcFVwKCdpbmZvJywgdGhhdCk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG5cbiAgc3RvcmVEb21FbGVtZW50KHRhc2tDb250YWluZXIpIHtcbiAgICB0aGlzLnRhc2tDb250YWluZXIgPSB0YXNrQ29udGFpbmVyO1xuICB9XG5cbiAgZGVsZXRlKCkge1xuICAgIHRoaXMudGFza0NvbnRhaW5lci5yZW1vdmUoKTtcbiAgfVxuXG4gIGRlbGV0ZTIoKSB7XG4gICAgY29uc29sZS5sb2codGhpcy5wYXJlbnRGb2xkZXIpO1xuICAgIHRoaXMucGFyZW50Rm9sZGVyLmRlbGV0ZUZyb21Gb2xkZXIodGhpcyk7XG4gICAgaWYgKHRoaXMuaW5XZWVrRm9sZGVyID09PSB0cnVlKSB7XG4gICAgICBzaWRlQmFyRm9sZGVycy5yZW1vdmVXZWVrKHRoaXMpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pblRvZGF5Rm9sZGVyID09PSB0cnVlKSB7XG4gICAgICBzaWRlQmFyRm9sZGVycy5yZW1vdmVUb2RheSh0aGlzKTtcbiAgICB9XG4gICAgYWRkVG9NYWluRm9sZGVyKCkucmVtb3ZlRnJvbU1haW5Gb2xkZXIodGhpcyk7XG4gIH1cblxuICBhZGRQYXJlbnRGb2xkZXIoZSkge1xuICAgIHRoaXMucGFyZW50Rm9sZGVyID0gZTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnBhcmVudEZvbGRlcik7XG4gIH1cblxuICBlZGl0VG9Ebyh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgfVxuXG4gIGFkZERhdGVGb2xkZXIoZm9sZGVyKSB7XG4gICAgaWYgKGZvbGRlciA9PT0gJ3dlZWsnKSB7XG4gICAgICB0aGlzLmluV2Vla0ZvbGRlciA9IHRydWU7XG4gICAgfVxuICAgIGlmIChmb2xkZXIgPT09ICd0b2RheScpIHtcbiAgICAgIHRoaXMuaW5Ub2RheUZvbGRlciA9IHRydWU7XG4gICAgfVxuICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuaW1wb3J0IHsgbmV3VG9EbyB9IGZyb20gXCIuL2FkZFRvRG9cIjtcbmltcG9ydCB7IGFkZFRvTWFpbkZvbGRlciB9IGZyb20gXCIuL2ZvbGRlcnNcIjtcbmltcG9ydCB7IGNyZWF0ZUZvbGRlciwgZm9sZGVyIH0gZnJvbSBcIi4vY3JlYXRlTmV3Rm9sZGVyXCI7XG5pbXBvcnQgeyBwb3BVcCB9IGZyb20gXCIuL3BvcHVwXCI7XG5pbXBvcnQgeyBvayB9IGZyb20gXCIuL3NpZGViYXItbGlua3NcIjtcbmltcG9ydCB7IG5ld0ZvbGRlciB9IGZyb20gXCIuL2dldEZvcm1EYXRhXCI7XG5cbmNvbnN0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC10YXNrXCIpXG5hZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwb3BVcCk7XG5cbmNvbnN0IGNyZWF0ZUZvbGRlckJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3JlYXRlRm9sZGVyXCIpO1xuY3JlYXRlRm9sZGVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwb3BVcCk7XG5cbmV4cG9ydCBjb25zdCBzdG9yZUZvbGRlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJmb2xkZXJzXCIpKSB8fCBbXTtcblxuXG5vaygpO1xubmV3Rm9sZGVyKFwiRGVmYXVsdFwiKVxuXG5cblxuXG5cbi8qIGNoZWNrRm9yRXJyb3JzKG9rKTsgKi8iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJtYWluRm9sZGVyIiwiZXh0cmFGb2xkZXJzIiwiYWRkVG9NYWluRm9sZGVyIiwib2siLCJhZGQiLCJwdXNoIiwiYWRkRm9sZGVyIiwicmVtb3ZlRnJvbU1haW5Gb2xkZXIiLCJpdGVtIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZm9sZGVyIiwiY29uc29sZSIsImxvZyIsInNpZGVCYXJGb2xkZXJzIiwid2VlayIsInRvZGF5IiwicHVzaFRvV2VlayIsInRvRG8iLCJ0aGlzIiwicHVzaFRvVG9kYXkiLCJwdXNodG9JbXBvcnRhbnQiLCJpbXBvcnRhbnQiLCJnZXRXZWVrIiwiZ2V0VG9kYXkiLCJyZW1vdmVXZWVrIiwicmVtb3ZlVG9kYXkiLCJkaXNwbGF5U3dpdGNoRm9sZGVycyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlIiwicmVtb3ZlIiwiY3JlYXRlTmVlZGVkRWxlbWVudHMiLCJ0YXNrc0NvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJ0YXNrQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsInRhc2tOYW1lIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJ0aXRsZSIsImRpdiIsImRhdGUiLCJkdWVEYXRlIiwic3RvcmVEb21FbGVtZW50Iiwic3BhbiIsImFycmF5T2ZTcGFucyIsImkiLCJpbWciLCJmaXJzdEVsZW1lbnRDaGlsZCIsInNyYyIsImNyZWF0ZUljb25zIiwic3RvcmVJY29ucyIsInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJ0b1N0cmluZyIsIkRhdGUiLCJnZXRUaW1lIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJOYU4iLCJ0b0ludGVnZXIiLCJkaXJ0eU51bWJlciIsIm51bWJlciIsIk51bWJlciIsImlzTmFOIiwiTWF0aCIsImNlaWwiLCJmbG9vciIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJzdGFydE9mV2VlayIsImRpcnR5RGF0ZSIsIm9wdGlvbnMiLCJfcmVmIiwiX3JlZjIiLCJfcmVmMyIsIl9vcHRpb25zJHdlZWtTdGFydHNPbiIsIl9vcHRpb25zJGxvY2FsZSIsIl9vcHRpb25zJGxvY2FsZSRvcHRpbyIsIl9kZWZhdWx0T3B0aW9ucyRsb2NhbCIsIl9kZWZhdWx0T3B0aW9ucyRsb2NhbDIiLCJ3ZWVrU3RhcnRzT24iLCJsb2NhbGUiLCJSYW5nZUVycm9yIiwiZGF5IiwiZ2V0RGF5IiwiZGlmZiIsInNldERhdGUiLCJnZXREYXRlIiwic2V0SG91cnMiLCJpc1NhbWVXZWVrIiwiZGlydHlEYXRlTGVmdCIsImRpcnR5RGF0ZVJpZ2h0IiwiZGF0ZUxlZnRTdGFydE9mV2VlayIsImRhdGVSaWdodFN0YXJ0T2ZXZWVrIiwic3RhcnRPZkRheSIsImlzU2FtZURheSIsImRhdGVMZWZ0U3RhcnRPZkRheSIsImRhdGVSaWdodFN0YXJ0T2ZEYXkiLCJjdXJyZW50Zm9sZGVyIiwiZ2V0Rm9ybURhdGEiLCJmb3JtIiwiYnV0dG9uVHlwZSIsImN1cnJlbnRGb2xkZXIiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwib2JqZWN0IiwiZnJvbUVudHJpZXMiLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwicGFyZW50Rm9sZGVyIiwidG9Eb2ZvbGRlciIsImVkaXRUb0RvIiwibmV3VG9EbyIsInBhcnNlZERhdGUiLCJwYXJzZSIsIm5vdyIsImlzVGhpc1dlZWsiLCJpc1RvZGF5IiwiYWRkRGF0ZUZvbGRlciIsImRldGVybWluZURhdGUiLCJhZGRUb0ZvbGRlciIsInN3aXRjaE1haW5EaXNwbGF5Rm9sZGVyIiwiYXNzaWduRm9ybURhdGEiLCJuZXdGb2xkZXIiLCJuZXdGb2xkZXJEb20iLCJzdG9yZUZvbGRlciIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicG9wdXBIIiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3B1cE1haW4iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicG9wVXAiLCJldmVudCIsInRhcmdldCIsImlkIiwiaGVhZGVyIiwic3R5bGUiLCJkaXNwbGF5IiwidG9nZ2xlRm9ybURpc3BsYXkiLCJ3YXJuaW5nVGV4dCIsImJ1dHRvbiIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImEiLCJkZWxldGVUb0RvIiwicHJldmVudERlZmF1bHQiLCJjcmVhdGVXYXJuaW5nQm94IiwiY29udGFpbmVyIiwiaW5mb0NvbnRhaW5lciIsImNyZWF0ZUluZm9Cb3hDb250ZW50cyIsImNyZWF0ZUJ1dHRvbnMiLCJjcmVhdGVCb3hJbnB1dCIsImFyciIsImVkaXQiLCJ0YXNrIiwic2V0SW5wdXRMYWJlbCIsImVsZW1lbnRUb0NyZWF0ZSIsIm5hbWUiLCJpbnB1dFdyYXBwZXIiLCJpbnB1dExhYmVsIiwiaHRtbEZvciIsIm1hcCIsImlucHV0IiwidW5kZWZpbmVkIiwidmFsdWUiLCJ0ZXh0QXJlYSIsInR5cGUiLCJzZWxlY3QiLCJjcmVhdGVPcHRpb24iLCJvcHRpb24iLCJzdWJtaXRCdXR0b24iLCJjYW5jZWxCdXR0b24iLCJidXR0b25zQ29udGFpbmVyIiwibGVmdCIsInJpZ2h0IiwiaW5mb0xlZnQiLCJpbmZvUmlnaHQiLCJkZXNjQ29udGFpbmVyIiwic2V0SGVhZGVyIiwibmV3SGVhZGVyIiwiYXBwZW5kSGVyZSIsImZvbGRlckJ1dHRvbiIsImljb24iLCJJbWFnZSIsInRoYXQiLCJkZWxldGVGb2xkZXIiLCJmb2xkZXJEb20iLCJhZGRQYXJlbnRGb2xkZXIiLCJkZWxldGVGcm9tRm9sZGVyIiwiaXRlbVRvRGVsZXRlIiwiaW5XZWVrRm9sZGVyIiwiaW5Ub2RheUZvbGRlciIsImRlbGV0ZURPTSIsInN3aXRjaEF3YXkiLCJBcnJheSIsImZyb20iLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJkZWxldGUiLCJkZWxldGUyIiwiZ2V0SXRlbSIsImIiXSwic291cmNlUm9vdCI6IiJ9