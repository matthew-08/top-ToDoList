(()=>{"use strict";const e=[];function t(e){let t=document.querySelector(".tasks-container"),n=document.createElement("div");n.classList.add("task-container");let o=document.createElement("p");n.appendChild(o),o.classList.add("task-name"),o.innerHTML=e.title;let d=document.createElement("div"),l=document.createElement("p");l.innerHTML=e.dueDate,l.classList.add("task-date"),n.appendChild(l),e.storeDomElement(n),d.classList.add("task-logos");let s=function(){let e=[];for(let t=1;t<=3;t++){let t=document.createElement("span"),n=document.createElement("img");t.appendChild(n),e.push(t)}return e[0].firstElementChild.src="/img/edit.png",e[0].classList.add("edit"),e[2].firstElementChild.src="/img/trash.png",e[2].classList.add("trash"),e[1].firstElementChild.src="/img/info.svg  ",e[1].classList.add("info"),e}();e.storeIcons(s),s.forEach((e=>d.appendChild(e))),n.appendChild(d),t.appendChild(n)}let n="";function o(o,s,i){let a=new FormData(o),r=Object.fromEntries(a),c=r.title,m=r.description,p=r.dueDate,u=r.priority;"addTask"===s?function(n,o,d,s,i){let a=new l(n,o,d,s);var r;r=a,e.push(r),console.log(e),""!==i?(i.addToFolder(a),i.switchMainDisplayFolder()):t(a)}(c,m,p,u,i):function(e){let t=new d(e);n=t,t.newFolderDom(),t.switchMainDisplayFolder()}(c)}class d{toDofolder=[];constructor(e){this.folder=e}setHeader(){document.querySelector(".main-title").textContent=this.folder}newFolderDom(e){this.setHeader(),this.switchMainDisplayFolder(this.toDofolder);const t=document.querySelector(".folders-container");let n=document.createElement("a");n.classList.add("menu-link-item"),n.textContent=this.folder,t.appendChild(n);const o=this;n.addEventListener("click",(function(){o.switchMainDisplayFolder()}))}addToFolder(e){this.toDofolder.push(e),console.log(this.toDofolder),e.addParentFolder(this)}deleteFromFolder(e){let t=this.toDofolder.indexOf(e);this.toDofolder.splice(t,1)}switchMainDisplayFolder(){n=this,console.log(this.toDofolder),function(e){document.querySelectorAll(".task-container").forEach((e=>e.remove())),e.forEach((e=>t(e)))}(this.toDofolder),this.setHeader()}switch(){console.log(this.toDofolder)}updateDisplay(){}}class l{constructor(e,t,n,o){this.title=e,this.description=t,this.dueDate=n,this.folder=o}storeIcons(e){const t=this;Array.from(e).forEach((e=>e.addEventListener("click",(function(e){let n=event.currentTarget;n.classList.contains("trash")?(t.delete(),t.delete2()):n.classList.contains("edit")?console.log("edit"):console.log("info")}))))}storeDomElement(e){this.taskContainer=e}delete(){console.log(this.folder),this.taskContainer.remove(),console.log(this.folder)}delete2(){console.log(this.parentFolder),this.parentFolder.deleteFromFolder(this)}addParentFolder(e){this.parentFolder=e,console.log(this.parentFolder)}}const s=document.getElementById("Epopup"),i=document.getElementsByClassName("popup-main");function a(e){let t=event.target.id;console.log(t);const n=document.getElementById("popup-header");s.style.display="flex","createFolder"==t&&(n.textContent="Create Folder",r(["Title"]),i[0].classList.add("createFolder"),c("createFolder")),"add-task"==t&&(n.textContent="Add task",r(["Title","Description","Due Date","Priority"]),c("addTask"))}function r(e){const t=document.getElementById("form");function n(e,n,o){const d=document.createElement("div");d.classList.add("input-wrapper"),t.appendChild(d);const l=document.createElement("label");l.textContent=e,l.htmlFor=o,d.appendChild(l),d.appendChild(n)}e.map((e=>{if("Title"===e){const t=document.createElement("input"),o="title";t.name=o,n(e,t,o)}if("Description"===e){const d=document.createElement("textarea");d.name="description",n(e,d)}if("Due Date"===e){const l=document.createElement("input");l.name="dueDate",l.type="date",n(e,l)}if("Priority"===e){const s=document.createElement("select");function i(e){let t=document.createElement("option");t.textContent=e,s.appendChild(t)}s.name="priority",i("Low"),i("High"),n(e,s)}}))}function c(e){let t=document.createElement("button");t.textContent="Submit",t.classList.add("submit-button"),t.type="submit",t.addEventListener("click",(function(d){d.preventDefault(),"addTask"===e?o(t.form,"addTask",n):(o(t.form,"createFolder"),i[0].classList.remove("createFolder")),a.innerHTML=" ",s.style.display="none"}));let d=document.createElement("button");d.addEventListener("click",(function(e){e.preventDefault(),a.innerHTML=" ",s.style.display="none"})),d.textContent="Cancel";let l=document.createElement("div");l.appendChild(t),l.appendChild(d),l.classList.add("buttons-container");const a=document.getElementById("form");a.appendChild(l)}document.getElementById("add-task").addEventListener("click",a),document.getElementById("createFolder").addEventListener("click",a)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cERBLEVBQUV5RyxpQkFDRjdFLEVBQUtsQixVQUFZLElBQ2pCb0UsRUFBT1EsTUFBTUMsUUFBVSxNQUMzQixJQUNBbUIsRUFBYXJELFlBQWMsU0FDM0IsSUFBSXNELEVBQW1CekcsU0FBU0csY0FBYyxPQUM5Q3NHLEVBQWlCbEcsWUFBWStGLEdBQzdCRyxFQUFpQmxHLFlBQVlpRyxHQUM3QkMsRUFBaUJyRyxVQUFVQyxJQUFJLHFCQUMvQixNQUFNcUIsRUFBTzFCLFNBQVM2RSxlQUFlLFFBQ3JDbkQsRUFBS25CLFlBQVlrRyxFQUVyQixDQzFIc0J6RyxTQUFTNkUsZUFBZSxZQUNoQ3RCLGlCQUFpQixRQUFTeUIsR0FFYmhGLFNBQVM2RSxlQUFlLGdCQUNoQ3RCLGlCQUFpQixRQUFTeUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvcC10b2RvbGlzdC8uL3NyYy9mb2xkZXJzLmpzIiwid2VicGFjazovL3RvcC10b2RvbGlzdC8uL3NyYy9kaXNwbGF5Rm9sZGVycy5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9zcmMvZ2V0Rm9ybURhdGEuanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0Ly4vc3JjL2NyZWF0ZU5ld0ZvbGRlci5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9zcmMvYWRkVG9Eby5qcyIsIndlYnBhY2s6Ly90b3AtdG9kb2xpc3QvLi9zcmMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vdG9wLXRvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRpc3BsYXlGb2xkZXJzIH0gZnJvbSBcIi4vZGlzcGxheUZvbGRlcnNcIjtcbmV4cG9ydCBjb25zdCBtYWluRm9sZGVyID0gWyBdXG5jb25zdCBleHRyYUZvbGRlcnMgPSB7XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFRvTWFpbkZvbGRlcihvaykge1xuICAgIFxuXG4gICAgZnVuY3Rpb24gYWRkKG9rKSB7XG4gICAgICAgICAgICBtYWluRm9sZGVyLnB1c2gob2spO1xuICAgICAgICAgICAgY2hlY2tNYWluRm9sZGVyKCk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBjaGVja01haW5Gb2xkZXIoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG1haW5Gb2xkZXIpO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHsgYWRkLCBtYWluRm9sZGVyLCBhZGRGb2xkZXJ9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRGb2xkZXIoZm9sZGVyKSB7XG4gICAgZXh0cmFGb2xkZXJzLmZvbGRlciA9IGZvbGRlclxuICAgIGNvbnNvbGUubG9nKGV4dHJhRm9sZGVycylcbn0iLCJcbmltcG9ydCB7IG1haW5Gb2xkZXIgfSBmcm9tIFwiLi9mb2xkZXJzXCI7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlGb2xkZXJzKG9rKSB7XG5cbiAgICAgICAgY3JlYXRlTmVlZGVkRWxlbWVudHMob2spXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5U3dpdGNoRm9sZGVycyhmb2xkZXIpIHtcbiAgICBsZXQgY3VycmVudFRhc2tDb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50YXNrLWNvbnRhaW5lclwiKVxuICAgIGN1cnJlbnRUYXNrQ29udGFpbmVycy5mb3JFYWNoKGUgPT4gZS5yZW1vdmUoKSk7XG4gICAgZm9sZGVyLmZvckVhY2goZSA9PiBjcmVhdGVOZWVkZWRFbGVtZW50cyhlKSk7XG5cblxufVxuXG4vKiBmdW5jdGlvbiBjcmVhdGVET01UYXNrKCkge1xuICAgIGNyZWF0ZU5lZWRlZEVsZW1lbnRzKClcbn0gKi9cblxuZnVuY3Rpb24gY3JlYXRlTmVlZGVkRWxlbWVudHMoZSkge1xuICAgIGxldCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3MtY29udGFpbmVyXCIpXG4gICAgbGV0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgdGFza0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGFzay1jb250YWluZXJcIilcbiAgICBsZXQgdGFza05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza05hbWUpO1xuICAgIHRhc2tOYW1lLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLW5hbWVcIilcbiAgICB0YXNrTmFtZS5pbm5lckhUTUwgPSBlLnRpdGxlO1xuICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgbGV0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgIGRhdGUuaW5uZXJIVE1MID0gZS5kdWVEYXRlXG4gICAgZGF0ZS5jbGFzc0xpc3QuYWRkKFwidGFzay1kYXRlXCIpO1xuICAgIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgICBlLnN0b3JlRG9tRWxlbWVudCh0YXNrQ29udGFpbmVyKTtcblxuICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwidGFzay1sb2dvc1wiKVxuXG4gICAgbGV0IHNwYW4gPSBjcmVhdGVJY29ucygpO1xuICAgIGUuc3RvcmVJY29ucyhzcGFuKTtcbiAgICBzcGFuLmZvckVhY2goZSA9PiBkaXYuYXBwZW5kQ2hpbGQoZSkpO1xuICAgIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTsgXG4gICAgdGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0NvbnRhaW5lcik7XG5cblxuICAgIFxuXG5cbn1cblxuZnVuY3Rpb24gY3JlYXRlSWNvbnMoKSB7XG4gICAgbGV0IGFycmF5T2ZTcGFucyA9IFsgXVxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDM7IGkgKyspIHtcbiAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICAgICAgbGV0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIHNwYW4uYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgYXJyYXlPZlNwYW5zLnB1c2goc3Bhbik7XG4gICAgfVxuXG5cblxuICAgIGFycmF5T2ZTcGFuc1swXS5maXJzdEVsZW1lbnRDaGlsZC5zcmMgPSBcIi9pbWcvZWRpdC5wbmdcIlxuICAgIGFycmF5T2ZTcGFuc1swXS5jbGFzc0xpc3QuYWRkKFwiZWRpdFwiKVxuICAgIGFycmF5T2ZTcGFuc1syXS5maXJzdEVsZW1lbnRDaGlsZC5zcmMgPSBcIi9pbWcvdHJhc2gucG5nXCJcbiAgICBhcnJheU9mU3BhbnNbMl0uY2xhc3NMaXN0LmFkZChcInRyYXNoXCIpXG4gICAgYXJyYXlPZlNwYW5zWzFdLmZpcnN0RWxlbWVudENoaWxkLnNyYyA9IFwiL2ltZy9pbmZvLnN2ZyAgXCJcbiAgICBhcnJheU9mU3BhbnNbMV0uY2xhc3NMaXN0LmFkZChcImluZm9cIilcbiAgICByZXR1cm4gYXJyYXlPZlNwYW5zXG59IiwiaW1wb3J0IHsgbmV3VG9EbyB9IGZyb20gXCIuL2FkZFRvRG9cIjtcbmltcG9ydCB7IGFkZFRvTWFpbkZvbGRlciwgYWRkRm9sZGVyLCB9IGZyb20gXCIuL2ZvbGRlcnNcIjtcbmltcG9ydCB7IGRpc3BsYXlGb2xkZXJzIH0gZnJvbSBcIi4vZGlzcGxheUZvbGRlcnNcIjtcbmltcG9ydCB7IGNyZWF0ZUZvbGRlciwgZm9sZGVyIH0gZnJvbSBcIi4vY3JlYXRlTmV3Rm9sZGVyXCI7XG5cblxuXG5leHBvcnQgbGV0IGN1cnJlbnRmb2xkZXIgPSBcIlwiXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JtRGF0YShmb3JtLCBidXR0b25UeXBlLCBjdXJyZW50Rm9sZGVyKSB7XG4gICAgbGV0IGsgPSBmb3JtXG4gICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGspXG4gICAgbGV0IG9iamVjdCA9IE9iamVjdC5mcm9tRW50cmllcyhmb3JtRGF0YSlcbiAgICBcbiAgICBsZXQgdGl0bGUgPSBvYmplY3QudGl0bGVcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBvYmplY3QuZGVzY3JpcHRpb25cbiAgICBsZXQgZHVlRGF0ZSA9IG9iamVjdC5kdWVEYXRlXG4gICAgbGV0IHByaW9yaXR5ID0gb2JqZWN0LnByaW9yaXR5XG4gICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiYWRkVGFza1wiKSB7XG4gICAgYXNzaWduRm9ybURhdGEodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgY3VycmVudEZvbGRlcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBuZXdGb2xkZXIodGl0bGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYXNzaWduRm9ybURhdGEodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgY3VycmVudEZvbGRlcikge1xuICAgIFxuXG4gICAgbGV0IHRvRG8gPSBuZXcgbmV3VG9Ebyh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5KTtcbiAgICBhZGRUb01haW5Gb2xkZXIoKS5hZGQodG9Ebyk7XG4gICAgaWYgKGN1cnJlbnRGb2xkZXIgIT09IFwiXCIpIHtcbiAgICAgICAgY3VycmVudEZvbGRlci5hZGRUb0ZvbGRlcih0b0RvKTtcbiAgICAgICAgY3VycmVudEZvbGRlci5zd2l0Y2hNYWluRGlzcGxheUZvbGRlcigpO1xuICAgICAgICBcbiAgICB9IGVsc2Uge1xuICAgIGRpc3BsYXlGb2xkZXJzKHRvRG8pOyBcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5ld0ZvbGRlcih0aXRsZSkge1xuICAgIGxldCBuZXdGb2xkZXIgPSBuZXcgZm9sZGVyKHRpdGxlKTtcbiAgICBjdXJyZW50Zm9sZGVyID0gbmV3Rm9sZGVyO1xuICAgIG5ld0ZvbGRlci5uZXdGb2xkZXJEb20oKTtcbiAgICBuZXdGb2xkZXIuc3dpdGNoTWFpbkRpc3BsYXlGb2xkZXIoKTtcblxufVxuIiwiLyogZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvbGRlcihmb2xkZXIpIHtcbiAgICBjb25zdCBuZXdGb2xkZXIgPSBbIF1cbiAgICBuZXdGb2xkZXJEb20oZm9sZGVyKTtcbiAgICBcbiAgICByZXR1cm4gbmV3Rm9sZGVyXG4gICAgXG59XG5cbmZ1bmN0aW9uIG5ld0ZvbGRlckRvbShmb2xkZXIpIHtcbiAgICBjb25zdCBhcHBlbmRIZXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb2xkZXJzLWNvbnRhaW5lclwiKVxuICAgIGxldCBmb2xkZXJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKVxuICAgIGZvbGRlckJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibWVudS1saW5rLWl0ZW1cIilcbiAgICBmb2xkZXJCdXR0b24udGV4dENvbnRlbnQgPSBmb2xkZXJcbiAgICBhcHBlbmRIZXJlLmFwcGVuZENoaWxkKGZvbGRlckJ1dHRvbilcbn0gKi9cblxuaW1wb3J0IHsgZGlzcGxheVN3aXRjaEZvbGRlcnMgfSBmcm9tIFwiLi9kaXNwbGF5Rm9sZGVyc1wiXG5pbXBvcnQgeyBjdXJyZW50Zm9sZGVyIH0gZnJvbSBcIi4vZ2V0Rm9ybURhdGFcIlxuXG5leHBvcnQgY2xhc3MgZm9sZGVyIHtcbiAgICB0b0RvZm9sZGVyID0gW1xuXG4gICAgXVxuXG4gICAgY29uc3RydWN0b3IoZm9sZGVyKSB7XG4gICAgICAgIHRoaXMuZm9sZGVyID0gZm9sZGVyXG4gICAgfVxuICAgIFxuICAgIHNldEhlYWRlcigpIHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLXRpdGxlXCIpXG4gICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9IHRoaXMuZm9sZGVyO1xuICAgIH1cblxuICAgIG5ld0ZvbGRlckRvbShmb2xkZXIpIHtcbiAgICAgICAgdGhpcy5zZXRIZWFkZXIoKTtcbiAgICAgICAgdGhpcy5zd2l0Y2hNYWluRGlzcGxheUZvbGRlcih0aGlzLnRvRG9mb2xkZXIpO1xuICAgICAgICBjb25zdCBhcHBlbmRIZXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb2xkZXJzLWNvbnRhaW5lclwiKVxuICAgICAgICBsZXQgZm9sZGVyQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIilcbiAgICAgICAgZm9sZGVyQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtZW51LWxpbmstaXRlbVwiKVxuICAgICAgICBmb2xkZXJCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLmZvbGRlcjtcbiAgICAgICAgYXBwZW5kSGVyZS5hcHBlbmRDaGlsZChmb2xkZXJCdXR0b24pXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzXG4gICAgICAgIGZvbGRlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGF0LnN3aXRjaE1haW5EaXNwbGF5Rm9sZGVyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFkZFRvRm9sZGVyKHRvRG8pIHtcbiAgICAgICAgdGhpcy50b0RvZm9sZGVyLnB1c2godG9EbylcbiAgICAgICAgY29uc29sZS5sb2codGhpcy50b0RvZm9sZGVyKTtcbiAgICAgICAgdG9Eby5hZGRQYXJlbnRGb2xkZXIodGhpcyk7XG4gICAgfVxuXG4gICAgZGVsZXRlRnJvbUZvbGRlcihpdGVtVG9EZWxldGUpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy50b0RvZm9sZGVyLmluZGV4T2YoaXRlbVRvRGVsZXRlKVxuICAgICAgICB0aGlzLnRvRG9mb2xkZXIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG5cbiAgICBzd2l0Y2hNYWluRGlzcGxheUZvbGRlcigpIHtcbiAgICAgICAgY3VycmVudGZvbGRlciA9IHRoaXM7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMudG9Eb2ZvbGRlcik7XG4gICAgICAgIGRpc3BsYXlTd2l0Y2hGb2xkZXJzKHRoaXMudG9Eb2ZvbGRlcik7XG4gICAgICAgIHRoaXMuc2V0SGVhZGVyKCk7XG4gICAgfVxuXG4gICAgc3dpdGNoKCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRvRG9mb2xkZXIpO1xuICAgIH1cblxuICAgIHVwZGF0ZURpc3BsYXkoKSB7XG5cbiAgICB9XG5cbn1cbiIsImltcG9ydCB7IGZvbGRlciB9IGZyb20gXCIuL2NyZWF0ZU5ld0ZvbGRlclwiXG5cblxuZXhwb3J0IGNsYXNzIG5ld1RvRG8ge1xuXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBmb2xkZXIpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvblxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlXG4gICAgICAgIHRoaXMuZm9sZGVyID0gZm9sZGVyXG4gICAgfVxuICAgIHN0b3JlSWNvbnMoc3Bhbikge1xuICAgICAgICBjb25zdCB0aGF0ID0gdGhpc1xuICAgICAgICBjb25zdCBhcnJheU9mSWNvbnMgPSBBcnJheS5mcm9tKHNwYW4pO1xuICAgICAgICBhcnJheU9mSWNvbnMuZm9yRWFjaChpY29uID0+IGljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKXtcbiAgICAgICAgICAgIGxldCBpY29uID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgICAgICAgIGlmIChpY29uLmNsYXNzTGlzdC5jb250YWlucyhcInRyYXNoXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5kZWxldGUoKTtcbiAgICAgICAgICAgICAgICB0aGF0LmRlbGV0ZTIoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWNvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJlZGl0XCIpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlZGl0XCIpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGVsc2UgY29uc29sZS5sb2coXCJpbmZvXCIpO1xuICAgICAgICB9KSlcbiAgICB9XG4gICAgc3RvcmVEb21FbGVtZW50KHRhc2tDb250YWluZXIpIHtcbiAgICAgICAgdGhpcy50YXNrQ29udGFpbmVyID0gdGFza0NvbnRhaW5lcjtcblxuICAgIH1cbiAgICBkZWxldGUoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9sZGVyKTsgXG4gICAgICAgIHRoaXMudGFza0NvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5mb2xkZXIpOyAgICAgIFxuXG4gICAgfVxuXG4gICAgZGVsZXRlMigpIHtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXJlbnRGb2xkZXIpO1xuICAgICAgICB0aGlzLnBhcmVudEZvbGRlci5kZWxldGVGcm9tRm9sZGVyKHRoaXMpO1xuICAgIH1cblxuICAgIGFkZFBhcmVudEZvbGRlcihlKSB7XG4gICAgICAgIHRoaXMucGFyZW50Rm9sZGVyID0gZTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXJlbnRGb2xkZXIpOyAgIFxuICAgIH1cblxufSIsIlxuaW1wb3J0IHsgZ2V0Rm9ybURhdGEgfSBmcm9tIFwiLi9nZXRGb3JtRGF0YVwiXG5cbmltcG9ydCB7IGN1cnJlbnRmb2xkZXIgfSBmcm9tIFwiLi9nZXRGb3JtRGF0YVwiXG5cbmNvbnN0IHBvcHVwSCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiRXBvcHVwXCIpXG5jb25zdCBwb3B1cE1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicG9wdXAtbWFpblwiKVxuZXhwb3J0IGZ1bmN0aW9uIHBvcFVwKGN1cnJlbnRGb2xkZXIpIHtcbiAgICBsZXQgcG9wVXAgPSBldmVudC50YXJnZXQuaWRcbiAgICBjb25zb2xlLmxvZyhwb3BVcCk7XG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3B1cC1oZWFkZXJcIilcbiAgICBwb3B1cEguc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiXG5cblxuXG4gICAgaWYgKHBvcFVwID09IFwiY3JlYXRlRm9sZGVyXCIpIHtcbiAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gXCJDcmVhdGUgRm9sZGVyXCJcbiAgICAgICAgY3JlYXRlQm94SW5wdXQoW1wiVGl0bGVcIl0pXG4gICAgICAgIHBvcHVwTWFpblswXS5jbGFzc0xpc3QuYWRkKFwiY3JlYXRlRm9sZGVyXCIpO1xuICAgICAgICBjcmVhdGVCdXR0b25zKFwiY3JlYXRlRm9sZGVyXCIpO1xuICAgIH1cbiBcbiAgICBpZiAocG9wVXAgPT0gXCJhZGQtdGFza1wiKSB7XG4gICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9IFwiQWRkIHRhc2tcIlxuICAgICAgICBjcmVhdGVCb3hJbnB1dChbXCJUaXRsZVwiLCBcIkRlc2NyaXB0aW9uXCIsIFwiRHVlIERhdGVcIiwgXCJQcmlvcml0eVwiXSk7XG4gICAgICAgIGNyZWF0ZUJ1dHRvbnMoXCJhZGRUYXNrXCIpO1xuICAgIH1cbiAgICBcbn1cblxuZnVuY3Rpb24gY3JlYXRlQm94SW5wdXQoYXJyKSB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9ybVwiKVxuXG4gICAgYXJyLm1hcChlID0+IHtcbiAgICAgICAgaWYgKGUgPT09IFwiVGl0bGVcIikge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBcInRpdGxlXCJcbiAgICAgICAgICAgIGlucHV0Lm5hbWUgPSBuYW1lXG4gICAgICAgICAgICBzZXRJbnB1dExhYmVsKGUsIGlucHV0LCBuYW1lKVxuICAgICAgICB9XG4gICAgICAgIGlmKGUgPT09IFwiRGVzY3JpcHRpb25cIikge1xuICAgICAgICAgICAgY29uc3QgdGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIilcbiAgICAgICAgICAgIHRleHRBcmVhLm5hbWUgPSBcImRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgIHNldElucHV0TGFiZWwoZSwgdGV4dEFyZWEpXG4gICAgICAgICAgICBcblxuICAgICAgICB9XG4gICAgICAgIGlmKGUgPT09IFwiRHVlIERhdGVcIikge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcbiAgICAgICAgICAgIGlucHV0Lm5hbWUgPSBcImR1ZURhdGVcIlxuICAgICAgICAgICAgaW5wdXQudHlwZSA9IFwiZGF0ZVwiXG4gICAgICAgICAgICBzZXRJbnB1dExhYmVsKGUsIGlucHV0KVxuXG4gICAgICAgIH1cbiAgICAgICAgaWYoZSA9PT0gXCJQcmlvcml0eVwiKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpXG4gICAgICAgICAgICBzZWxlY3QubmFtZSA9IFwicHJpb3JpdHlcIjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbiAodGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKVxuICAgICAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IHRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3JlYXRlT3B0aW9uKFwiTG93XCIpO1xuICAgICAgICAgICAgY3JlYXRlT3B0aW9uKFwiSGlnaFwiKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldElucHV0TGFiZWwoZSwgc2VsZWN0KVxuXG4gICAgICAgIH1cbiAgICB9KVxuICAvKiAgIGNvbnN0IGlucHV0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcbiAgICBpbnB1dFdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5wdXRMYWJlbClcbiAgICBpbnB1dFdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5wdXQpOyAqL1xuXG4gICAgZnVuY3Rpb24gc2V0SW5wdXRMYWJlbChlLCBlbGVtZW50VG9DcmVhdGUsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgaW5wdXRXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgICAgICBpbnB1dFdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImlucHV0LXdyYXBwZXJcIilcbiAgICAgICAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dFdyYXBwZXIpO1xuICAgICAgICBjb25zdCBpbnB1dExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpXG4gICAgICAgIGlucHV0TGFiZWwudGV4dENvbnRlbnQgPSBlXG4gICAgICAgIGlucHV0TGFiZWwuaHRtbEZvciA9IG5hbWVcbiAgICAgICAgaW5wdXRXcmFwcGVyLmFwcGVuZENoaWxkKGlucHV0TGFiZWwpXG4gICAgICAgIGlucHV0V3JhcHBlci5hcHBlbmRDaGlsZChlbGVtZW50VG9DcmVhdGUpXG4gICAgICAgIFxuICAgIH1cblxufVxuZnVuY3Rpb24gY3JlYXRlQnV0dG9ucyhidXR0b25UeXBlKSB7XG5cblxuICAgIGxldCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTdWJtaXRcIlxuICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwic3VibWl0LWJ1dHRvblwiKVxuICAgIHN1Ym1pdEJ1dHRvbi50eXBlID0gXCJzdWJtaXRcIlxuXG5cbiAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIHN1Ym1pdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGJ1dHRvblR5cGUgPT09IFwiYWRkVGFza1wiKSB7XG4gICAgICAgIGdldEZvcm1EYXRhKHN1Ym1pdEJ1dHRvbi5mb3JtLCBcImFkZFRhc2tcIiwgY3VycmVudGZvbGRlcilcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgZ2V0Rm9ybURhdGEoc3VibWl0QnV0dG9uLmZvcm0sIFwiY3JlYXRlRm9sZGVyXCIpXG4gICAgICAgIHBvcHVwTWFpblswXS5jbGFzc0xpc3QucmVtb3ZlKFwiY3JlYXRlRm9sZGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZvcm0uaW5uZXJIVE1MID0gXCIgXCJcbiAgICAgICAgcG9wdXBILnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuXG4gICAgfSlcblxuXG5cbiAgICBsZXQgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gcHJldmVudChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZm9ybS5pbm5lckhUTUwgPSBcIiBcIlxuICAgICAgICBwb3B1cEguc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgfSApXG4gICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIlxuICAgIGxldCBidXR0b25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbik7XG4gICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xuICAgIGJ1dHRvbnNDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImJ1dHRvbnMtY29udGFpbmVyXCIpXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9ybVwiKVxuICAgIGZvcm0uYXBwZW5kQ2hpbGQoYnV0dG9uc0NvbnRhaW5lcik7XG4gICAgXG59XG5cbiIsImltcG9ydCB7IG5ld1RvRG8gfSBmcm9tIFwiLi9hZGRUb0RvXCI7XG5pbXBvcnQgeyBhZGRUb01haW5Gb2xkZXIgfSBmcm9tIFwiLi9mb2xkZXJzXCI7XG5pbXBvcnQgeyBjcmVhdGVGb2xkZXIgfSBmcm9tIFwiLi9jcmVhdGVOZXdGb2xkZXJcIjtcbmltcG9ydCB7IHBvcFVwIH0gZnJvbSBcIi4vcG9wdXBcIjtcblxuY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXRhc2tcIilcbmFkZFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHBvcFVwKTtcblxuY29uc3QgY3JlYXRlRm9sZGVyQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjcmVhdGVGb2xkZXJcIik7XG5jcmVhdGVGb2xkZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHBvcFVwKTtcblxuXG5cbi8qIGNoZWNrRm9yRXJyb3JzKG9rKTsgKi8iXSwibmFtZXMiOlsibWFpbkZvbGRlciIsImNyZWF0ZU5lZWRlZEVsZW1lbnRzIiwiZSIsInRhc2tzQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGFza0NvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YXNrTmFtZSIsImFwcGVuZENoaWxkIiwiaW5uZXJIVE1MIiwidGl0bGUiLCJkaXYiLCJkYXRlIiwiZHVlRGF0ZSIsInN0b3JlRG9tRWxlbWVudCIsInNwYW4iLCJhcnJheU9mU3BhbnMiLCJpIiwiaW1nIiwicHVzaCIsImZpcnN0RWxlbWVudENoaWxkIiwic3JjIiwiY3JlYXRlSWNvbnMiLCJzdG9yZUljb25zIiwiZm9yRWFjaCIsImN1cnJlbnRmb2xkZXIiLCJnZXRGb3JtRGF0YSIsImZvcm0iLCJidXR0b25UeXBlIiwiY3VycmVudEZvbGRlciIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJvYmplY3QiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJ0b0RvIiwibmV3VG9EbyIsIm9rIiwiY29uc29sZSIsImxvZyIsImFkZFRvRm9sZGVyIiwic3dpdGNoTWFpbkRpc3BsYXlGb2xkZXIiLCJhc3NpZ25Gb3JtRGF0YSIsIm5ld0ZvbGRlciIsImZvbGRlciIsIm5ld0ZvbGRlckRvbSIsInRvRG9mb2xkZXIiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJzZXRIZWFkZXIiLCJ0ZXh0Q29udGVudCIsImFwcGVuZEhlcmUiLCJmb2xkZXJCdXR0b24iLCJ0aGF0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZFBhcmVudEZvbGRlciIsImRlbGV0ZUZyb21Gb2xkZXIiLCJpdGVtVG9EZWxldGUiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlIiwiZGlzcGxheVN3aXRjaEZvbGRlcnMiLCJzd2l0Y2giLCJ1cGRhdGVEaXNwbGF5IiwiQXJyYXkiLCJmcm9tIiwiaWNvbiIsImV2ZW50IiwiY3VycmVudFRhcmdldCIsImNvbnRhaW5zIiwiZGVsZXRlIiwiZGVsZXRlMiIsInBhcmVudEZvbGRlciIsInBvcHVwSCIsImdldEVsZW1lbnRCeUlkIiwicG9wdXBNYWluIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBvcFVwIiwidGFyZ2V0IiwiaWQiLCJoZWFkZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJjcmVhdGVCb3hJbnB1dCIsImNyZWF0ZUJ1dHRvbnMiLCJhcnIiLCJzZXRJbnB1dExhYmVsIiwiZWxlbWVudFRvQ3JlYXRlIiwibmFtZSIsImlucHV0V3JhcHBlciIsImlucHV0TGFiZWwiLCJodG1sRm9yIiwibWFwIiwiaW5wdXQiLCJ0ZXh0QXJlYSIsInR5cGUiLCJzZWxlY3QiLCJjcmVhdGVPcHRpb24iLCJvcHRpb24iLCJzdWJtaXRCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsImNhbmNlbEJ1dHRvbiIsImJ1dHRvbnNDb250YWluZXIiXSwic291cmNlUm9vdCI6IiJ9